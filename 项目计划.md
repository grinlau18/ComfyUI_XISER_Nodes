# 项目计划（ComfyUI v3 + Vue）

## 目标与范围
- 让 XISER-Nodes 全量迁移到 ComfyUI v3 后端与 Vue 前端，后续开发仅维护 v3。
- 只加载已迁移的 v3 模块，未迁移的 A/S 级模块暂不加载，避免兼容性风险。
- 前端不做大改动，沿用现有 JS/Vue 交互，通过 v3 自定义类型对接。

## 当前状态
- 已迁移并加载的模块：logic, ui_control, list_processing, data_processing, label, set_color, image_and_mask, canvas（含 XIS_Canvas 与 CanvasMaskProcessor），image_preview, resize_image_or_mask, sampling, image_puzzle, shape_data, psd_layer_extract, adjust_image。
- 待迁移的 A 级模块：无（A级节点已全部迁移完成）。
- 待迁移的 S 级模块：curve_editor, coordinate_path, reorder_images, shape_and_text, multi_point_gradient, llm.orchestrator, image_manager.node。
- 顶层与聚合层 `__init__.py` 已切换为 v3-only 加载策略（NODE_CLASS_MAPPINGS = None，使用 comfy_entrypoint）。

## 路线与里程碑
- 阶段 A1（无前端 A 级节点）：✅ 已完成 resize_image_or_mask 和 sampling 模块的 v3 迁移，补齐 image_and_mask 余项的测试。产出：节点可加载、基础功能用例通过。
- 阶段 A2（有/轻前端 A 级节点）：✅ 已完成 image_puzzle、shape_data、psd_layer_extract、adjust_image 模块的 v3 迁移。产出：Vue/传统双界面验证，序列化读写一致，修复前端 JS 错误。
- 阶段 S（重前端节点）：curve_editor、coordinate_path、multi_point_gradient、shape_and_text、llm.orchestrator、image_manager.node 等。产出：画布/路径/渐变类交互稳定、性能可接受。
- 支撑任务：保持节点加载日志、自动/手动测试清单更新，文档与计划同步。

## 交付与验收
- 每阶段完成标准：节点在 ComfyUI 可见且可运行；必要的前端交互正常；常规用例通过；未迁移节点保持未加载状态。
- 最终完成：所有 A/S 级节点迁移到 v3，前端兼容 Vue，文档（计划/指导/进度）同步到最新状态。 


## 技术指导
- 迁移技术指导：/Users/grin/Documents/comfy/ComfyUI/custom_nodes/ComfyUI_XISER_Nodes/技术指导.md

## 进度报告
- 项目迁移进度更新：/Users/grin/Documents/comfy/ComfyUI/custom_nodes/ComfyUI_XISER_Nodes/进度报告.md